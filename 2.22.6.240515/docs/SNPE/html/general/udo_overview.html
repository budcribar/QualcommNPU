

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Overview of UDO &mdash; Snapdragon Neural Processing Engine SDK</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_css.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Defining a UDO" href="udo_operator_definition.html" />
    <link rel="prev" title="User-defined Operations" href="usergroup2.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Qualcomm® Neural Processing SDK
          

          
          </a>

          
            
            
              <div class="version">
                v2.22.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="revision_history.html">Revision History</a></li>
<li class="toctree-l1"><a class="reference internal" href="revision_history_windows.html">Revision History - Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="usergroup1.html">Network Models</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="network_layers.html">Supported Network Layers</a></li>
<li class="toctree-l2"><a class="reference internal" href="supported_onnx_ops.html">Supported ONNX Ops</a></li>
<li class="toctree-l2"><a class="reference internal" href="quantized_models.html">Quantized vs Non-Quantized Models</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="usergroup2.html">User-defined Operations</a><ul class="current">
<li class="toctree-l3 current"><a class="current reference internal" href="#">Overview of UDO</a></li>
<li class="toctree-l3"><a class="reference internal" href="udo_operator_definition.html">Defining a UDO</a></li>
<li class="toctree-l3"><a class="reference internal" href="udo_package_definition.html">Defining a UDO Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="creating_udo_package.html">Creating a UDO Package</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiling_udo_package.html">Compiling a UDO package</a></li>
<li class="toctree-l3"><a class="reference internal" href="compiling_udo_package_for_windows.html">Compiling a UDO package for Windows</a></li>
<li class="toctree-l3"><a class="reference internal" href="preparing_model_with_udo.html">Preparing a model with UDO</a></li>
<li class="toctree-l3"><a class="reference internal" href="running_model_with_udo.html">Running a model with UDO</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="usergroup3.html">Model Conversion</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usergroup5.html">Input Data and Preprocessing</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup6.html">Tutorials and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup10.html">Benchmarking and Accuracy</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup11.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="limitations.html">Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="appx_ref.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Qualcomm® Neural Processing SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="usergroup1.html">Network Models</a> &raquo;</li>
        
          <li><a href="usergroup2.html">User-defined Operations</a> &raquo;</li>
        
      <li>Overview of UDO</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="overview-of-udo">
<h1>Overview of UDO<a class="headerlink" href="#overview-of-udo" title="Permalink to this heading">¶</a></h1>
<div class="ui-resizable side-nav-resizable docutils container" id="side-nav">
<div class="docutils container" id="nav-tree">
<div class="docutils container" id="nav-tree-contents">
</div>
</div>
</div>
<div class="docutils container" id="doc-content">
<div class="header docutils container">
</div>
<div class="contents docutils container">
<div class="textblock docutils container">
<p class="rubric" id="introduction">Introduction</p>
<p>Qualcomm® Neural Processing SDK provides the ability for users to plug in custom neural
network operations that may not be inherently supported by the
runtime engine in the form of User-Defined Operations
(hereafter referred to as UDO). These could be operations
defined in popular training frameworks such as Tensorflow or
custom operations that are built based as framework extensions
but not available in the Qualcomm® Neural Processing SDK. They can be natively
executed on any of the supported hardware accelerators for
which they are implemented. Qualcomm® Neural Processing SDK provides the infrastructure to
execute these operations in a seamless fashion with little to
no overhead compared to executing internally supported
operations.</p>
<p class="rubric" id="anatomy-of-a-udo-package">Anatomy of a UDO package</p>
<div class="line-block">
<div class="line">Qualcomm® Neural Processing SDK allows users to provide UDO implementations in the form
of dynamic libraries that can be queried, loaded and
exercised to execute inference using kernels defined within
them. Qualcomm® Neural Processing SDK promotes the notion of a ‘UDO package’ with which
a user can easily express the association between the
different components of a UDO. This notion is central to all
the tools that enable users to create UDO packages to be used
in network inference. However, it is to be noted that Qualcomm® Neural Processing SDK
still directly interfaces with the various UDO libraries at
runtime and not with the UDO package construct. Thus users
are free to just build standalone libraries without being
strictly bound to this notion of a package.</div>
<div class="line">The figure below illustrates the concept of a UDO package:</div>
</div>
<div class="docutils container">
<div class="figure align-default">
<img alt="../images/UdoPackage.png" src="../images/UdoPackage.png" />
</div>
</div>
<div class="line-block">
<div class="line">As seen from the picture, a UDO package consists of a
registration component and an implementation component. They
are usually expressed separately with one registration
library and a set of implementation libraries, one for each
hardware accelerator for which an implementation kernel is
available. Users can optionally build both components into a
single library if they so wish.</div>
</div>
<p>The registration library consists of methods that specify all
user-defined operations and the hardware cores they are
designed for. It also consists of methods that allow operations
to be validated for sanity at the time of network creation. The
registration library is loaded and executed on the ARM CPU.</p>
<p>The hardware-specific implementation libraries expose several
other methods that implement operation instance creation,
execution, profiling and destruction. These are implemented
with programming constructs supported from corresponding
software platforms, such as OpenCL for GPU and Hexagon-NN SDK
for DSP. While core-specific implementation files may differ
entirely in source, they are all required to interface with
Qualcomm® Neural Processing SDK using a set of C APIs defined in $SNPE_ROOT/include/SNPE/SnpeUdo.
The complete details on these APIs can be obtained from
Qualcomm® Neural Processing SDK API.</p>
<p class="rubric" id="udo-workflow">UDO workflow</p>
<p>Qualcomm® Neural Processing SDK recommends the following workflow in developing and
integrating a UDO into the runtime:</p>
<div class="docutils container">
<div class="figure align-default">
<img alt="../images/UdoWorkflow.png" src="../images/UdoWorkflow.png" />
</div>
</div>
<p>The first step in the workflow is to identify the operations in
the model that need to be expressed as user-defined operations
and describing their attributes through a configuration file.
The format and contents of this file are described in <a class="reference external" href="udo_operator_definition.html">Defining
a UDO</a>.</p>
<p>The next set of steps produce the components of a UDO package
by creating source files for the UDO kernels and compiling them
against appropriate tool-chains to generate dynamic libraries
specific to hardware cores such as the GPU and DSP. Qualcomm® Neural Processing SDK
provides a tool called <code class="docutils literal notranslate"><span class="pre">snpe-udo-package-generator</span></code> that
assists users in creating common skeleton code for interfacing
with Qualcomm® Neural Processing SDK UDO APIs and leaves placeholders for users to fill in
the kernel implementation. It also generates makefiles for
common targets such as x86, Android, and for runtimes per
target specified in the config file. For more details on the
package generation refer to <a class="reference external" href="creating_udo_package.html">Creating a UDO
Package</a>. For details on
compiling the UDO package for a specific runtime refer to
<a class="reference external" href="compiling_udo_package.html">Compiling a UDO package</a>.</p>
<p>The config file created in the first step is also required to
be used by the Qualcomm® Neural Processing SDK model conversion tools along with the
actual trained model to allow interpretation of the
user-defined operations using definitions from the file. The
resulting DLC files can then be inspected using tools like
<code class="docutils literal notranslate"><span class="pre">snpe-dlc-info</span></code> to probe the attributes of the UDOs in the
model. For details on creating (and optionally quantizing) DLCs
with UDOs refer to <a class="reference external" href="preparing_model_with_udo.html">Preparing a model with
UDO</a>. Optionally, models with
UDOs can also be quantized using Qualcomm® Neural Processing SDK quantization tools to use
with fixed-point runtimes such as DSP. The quantizer tool
estimates the quantization ranges for activations from all
layers in the network including UDOs. Since the tool runs
offline on an x86 host machine, it is required to have a CPU
implementation for the UDO in order to perform inference
through the entire network. This is also illustrated in dotted
lines in the workflow diagram. Refer to <a class="reference external" href="preparing_model_with_udo.html#quantize_network_with_udo">Quantizing a DLC with
UDO</a>
for details on the quantization process.</p>
<p>The final step in this workflow is to be able to actually
execute network models with UDOs. Qualcomm® Neural Processing SDK applications use the UDO
package to register UDO implementations within the process that
runs inference on select network models. It should be noted
that these UDOs can be exercised by multiple instances of Qualcomm® Neural Processing SDK
simultaneously without race conditions, which increases the
overall throughput for network inference. For more details on
the UDO package registration process refer to <a class="reference external" href="running_model_with_udo.html">Running a model
with UDO</a>.</p>
<p>If the DSP implementation library of the UDO is not signed for
execution on a signed process domain (the default for a Qualcomm® Neural Processing SDK
application), it is required to request the use of an unsigned
process domain. Unsigned process domains apply only to the DSP
target, and allow Qualcomm® Neural Processing SDK to use unsigned UDO implementation
libraries. To see how to utilize an unsigned process domain
with the Qualcomm® Neural Processing SDK application, refer to <a class="reference external" href="running_model_with_udo.html">Running a model with
UDO</a>.</p>
<p class="rubric" id="udo-backward-compatibility">UDO Backward Compatibility</p>
<p>This section specifies limitations of UDO packages :</p>
<ul class="simple">
<li><p>The UDOs compiled for DSP V68 or later on a particular Qualcomm® Neural Processing SDK release
version, needs to be used with same release version and
can’t be used with different release version.</p></li>
<li><p>Users need to recompile UDO packages generated for DSP V68
by using correct Qualcomm® AI Direct SDK which is compatible with a
particular Qualcomm® Neural Processing SDK release.</p></li>
</ul>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="udo_operator_definition.html" class="btn btn-neutral float-right" title="Defining a UDO" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="usergroup2.html" class="btn btn-neutral float-left" title="User-defined Operations" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2023, Qualcomm Technologies, Inc..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>