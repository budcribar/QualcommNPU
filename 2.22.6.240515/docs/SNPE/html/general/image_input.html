

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" />
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  
  <title>Input Image Formatting &mdash; Snapdragon Neural Processing Engine SDK</title>
  

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/custom_css.css" type="text/css" />

  
  

  
  

  

  
  <!--[if lt IE 9]>
    <script src="../_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
        <script src="../_static/jquery.js"></script>
        <script src="../_static/underscore.js"></script>
        <script src="../_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script src="../_static/doctools.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="Tutorials and Examples" href="usergroup6.html" />
    <link rel="prev" title="Input Data and Preprocessing" href="usergroup5.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> Qualcomm® Neural Processing SDK
          

          
          </a>

          
            
            
              <div class="version">
                v2.22.6
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        
        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="revision_history.html">Revision History</a></li>
<li class="toctree-l1"><a class="reference internal" href="revision_history_windows.html">Revision History - Windows</a></li>
<li class="toctree-l1"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l1"><a class="reference internal" href="overview.html">Overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="setup.html">Setup</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup1.html">Network Models</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="usergroup5.html">Input Data and Preprocessing</a><ul class="current">
<li class="toctree-l2 current"><a class="current reference internal" href="#">Input Image Formatting</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="usergroup6.html">Tutorials and Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup10.html">Benchmarking and Accuracy</a></li>
<li class="toctree-l1"><a class="reference internal" href="tools.html">Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="usergroup11.html">Debug Tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API</a></li>
<li class="toctree-l1"><a class="reference internal" href="limitations.html">Limitations</a></li>
<li class="toctree-l1"><a class="reference internal" href="appx_ref.html">References</a></li>
</ul>

            
          
        </div>
        
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">Qualcomm® Neural Processing SDK</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          

















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html" class="icon icon-home"></a> &raquo;</li>
        
          <li><a href="usergroup5.html">Input Data and Preprocessing</a> &raquo;</li>
        
      <li>Input Image Formatting</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="input-image-formatting">
<h1>Input Image Formatting<a class="headerlink" href="#input-image-formatting" title="Permalink to this heading">¶</a></h1>
<div class="ui-resizable side-nav-resizable docutils container" id="side-nav">
<div class="docutils container" id="nav-tree">
<div class="docutils container" id="nav-tree-contents">
</div>
</div>
</div>
<div class="docutils container" id="doc-content">
<div class="header docutils container">
</div>
<div class="contents docutils container">
<div class="textblock docutils container">
<p class="rubric" id="input-images">Input Images</p>
<p>In addition to converting the model, Qualcomm® Neural Processing SDK also requires the
input image to be in a specific format that might be different
from the source framework.</p>
<p>In certain frameworks (Ex: Pytorch), the image may be presented as a tensor of shape
<code class="docutils literal notranslate"><span class="pre">(batch</span> <span class="pre">x</span> <span class="pre">channel</span> <span class="pre">x</span> <span class="pre">height</span> <span class="pre">x</span> <span class="pre">width)</span></code>, where width is the
fastest-changing dimension, followed by height, then color
channel. This means that all the pixel values of the first
color channel are contiguous in memory, followed by all the
pixel values of the next color channel, and so forth.</p>
<p>In Qualcomm® Neural Processing SDK, the image must be presented as a tensor of shape
<code class="docutils literal notranslate"><span class="pre">(batch</span> <span class="pre">x</span> <span class="pre">height</span> <span class="pre">x</span> <span class="pre">width</span> <span class="pre">x</span> <span class="pre">channel)</span></code>, where channel is the
fastest-changing dimension. This means that values for all the
color channels of a single pixel are contiguous in memory,
followed by all the color values of the next pixel, and so
forth.</p>
<p>If the batch dimension is greater than 1, the individual images
have to be manually concatenated together into a single file
for each batch.</p>
<p>See the figure below for a visual representations of the two
input image memory layouts.</p>
<p><strong>Note:</strong></p>
<p>The channel order used during inference must be the same as
that used during training. For example, Imagenet models trained
in certain frameworks may require a channel order of BGR.</p>
<p class="rubric" id="input-image-for-imagenet-models">Input Image for Imagenet Models</p>
<p>The Imagenet models in some frameworks (such as bvlc_alexnet,
bvlc_googlenet, etc.) are trained with BGR images (blue pixels
before green pixels before red pixels). The inference engine
must be provided the pixel values in the same channel order.</p>
<div class="line-block">
<div class="line">The following image shows the two different input image
memory layouts required by Pytorch and Qualcomm® Neural Processing SDK for the
bvlc_alexnet model. The input image size is 227x227.</div>
</div>
<div class="docutils container">
<div class="figure align-default">
<img alt="../images/image_layouts.png" src="../images/image_layouts.png" />
</div>
</div>
<p class="rubric" id="input-image-for-mnist-models">Input Image for MNIST Models</p>
<p>The MNIST models (such as lenet) in some frameworks require
single-channel grayscale images of size 28x28. Note that while
there is only one channel, an input tensor of 4 dimensions is
still required in these frameworks <code class="docutils literal notranslate"><span class="pre">(1x1x28x28)</span></code> and Qualcomm® Neural Processing SDK
<code class="docutils literal notranslate"><span class="pre">(1x28x28x1)</span></code>.</p>
<p class="rubric" id="output">Output</p>
<p>The output of the example remains the same between Pytorch and
Qualcomm® Neural Processing SDK: a 1-dimensional tensor containing the probability of each
class, for each image in the batch.</p>
<p>For Imagenet models (such as bvlc_alexnet), this is a tensor of
size 1000 for the 1000 Imagenet classes.</p>
<p>If the batch dimension of the model is greater than 1, the
individual output tensors will be concatenated together along
the batch dimension.</p>
</div>
</div>
</div>
</div>


           </div>
           
          </div>
          <footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
        <a href="usergroup6.html" class="btn btn-neutral float-right" title="Tutorials and Examples" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
        <a href="usergroup5.html" class="btn btn-neutral float-left" title="Input Data and Preprocessing" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>
        &#169; Copyright 2020-2023, Qualcomm Technologies, Inc..

    </p>
  </div>
    
    
    
    Built with <a href="https://www.sphinx-doc.org/">Sphinx</a> using a
    
    <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a>
    
    provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>
        </div>
      </div>

    </section>

  </div>
  

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>